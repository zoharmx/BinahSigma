<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Binah-Œ£ v2.0 - Decision Analysis Engine</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="FAVICON.png">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://binahsigma.onrender.com/app.html">
  <meta property="og:title" content="Binah-Œ£ v2.0 - Decision Analysis Engine">
  <meta property="og:description" content="Cognitive Infrastructure for Structured Decision Evaluation">
  <meta property="og:image" content="IMAGE_SOCIAL.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://binahsigma.onrender.com/app.html">
  <meta property="twitter:title" content="Binah-Œ£ v2.0 - Decision Analysis Engine">
  <meta property="twitter:description" content="Cognitive Infrastructure for Structured Decision Evaluation">
  <meta property="twitter:image" content="IMAGE_SOCIAL.png">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Courier New', monospace;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
      color: #00ff88;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
    }

    .back-button {
      position: absolute;
      top: 0;
      left: 0;
      padding: 10px 20px;
      background: transparent;
      border: 1px solid var(--primary, #00ff88);
      color: var(--primary, #00ff88);
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: 'Courier New', monospace;
    }

    .back-button:hover {
      background: var(--primary, #00ff88);
      color: #0a0a0a;
      transform: translateX(-3px);
    }

    .lang-toggle {
      position: absolute;
      top: 0;
      right: 0;
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--primary, #00ff88);
      color: var(--primary, #00ff88);
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.9rem;
    }

    .lang-toggle:hover {
      background: var(--primary, #00ff88);
      color: #0a0a0a;
    }

    .lang-icon {
      font-size: 1.1rem;
    }

    .logo-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 10px;
    }

    .logo-header img {
      height: 50px;
      width: auto;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 10px;
      text-shadow: 0 0 20px #00ff88;
    }

    .version {
      color: #00ffff;
      font-size: 0.9rem;
    }

    .subtitle {
      color: #888;
      margin-bottom: 20px;
      font-size: 0.9rem;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      border-bottom: 2px solid #00ff88;
      padding-bottom: 10px;
    }

    .tab {
      padding: 10px 20px;
      background: #0f0f0f;
      border: 1px solid #00ff88;
      color: #00ff88;
      cursor: pointer;
      transition: all 0.3s;
    }

    .tab:hover, .tab.active {
      background: #00ff88;
      color: #0a0a0a;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .examples-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .example-card {
      background: #0f0f0f;
      border: 1px solid #00ff88;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .example-card:hover {
      background: #1a1a1a;
      border-color: #00ffff;
      transform: translateY(-5px);
    }

    .example-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: #00ffff;
    }

    .example-desc {
      font-size: 0.85rem;
      color: #888;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      color: #00ff88;
      font-weight: bold;
      font-size: 0.9rem;
    }

    input, textarea, select {
      width: 100%;
      padding: 12px;
      background: #0f0f0f;
      border: 1px solid #00ff88;
      color: #00ff88;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      border-radius: 4px;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #00ffff;
      box-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    button {
      width: 100%;
      padding: 15px;
      background: #00ff88;
      color: #0a0a0a;
      border: none;
      font-family: 'Courier New', monospace;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 4px;
      margin-top: 10px;
      transition: all 0.3s;
    }

    button:hover {
      background: #00ffff;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
    }

    button:disabled {
      background: #333;
      color: #666;
      cursor: not-allowed;
    }

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .metric-card {
      background: #0f0f0f;
      border: 1px solid #00ff88;
      padding: 15px;
      border-radius: 4px;
    }

    .metric-label {
      font-size: 0.75rem;
      color: #888;
      margin-bottom: 5px;
    }

    .metric-value {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .metric-value.high {
      color: #00ff88;
    }

    .metric-value.medium {
      color: #ffaa00;
    }

    .metric-value.low {
      color: #ff5555;
    }

    pre {
      background: #0f0f0f;
      color: #00ff88;
      padding: 20px;
      border: 1px solid #00ff88;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 0.85rem;
      line-height: 1.5;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: #00ffff;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .error {
      background: #ff0000;
      color: #fff;
      padding: 15px;
      border-radius: 4px;
      margin-top: 20px;
    }

    .hint {
      font-size: 0.75rem;
      color: #666;
      margin-top: 5px;
    }

    .section-title {
      font-size: 1.5rem;
      margin: 30px 0 15px 0;
      color: #00ffff;
    }

    .array-list {
      list-style: none;
      padding: 0;
    }

    .array-list li {
      background: #0f0f0f;
      padding: 10px;
      margin-bottom: 5px;
      border-left: 3px solid #00ff88;
    }

    .api-key-section {
      background: #1a1a2e;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
      border: 1px solid #00ffff;
    }

    .provider-select {
      margin-bottom: 20px;
    }

    /* ===== RESPONSIVE DESIGN ===== */

    /* Tablets y pantallas medianas (max-width: 768px) */
    @media (max-width: 768px) {
      body {
        padding: 15px;
      }

      h1 {
        font-size: 2rem;
      }

      .tabs {
        flex-wrap: wrap;
        gap: 8px;
      }

      .tab {
        padding: 8px 15px;
        font-size: 0.85rem;
      }

      .examples-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      button {
        padding: 12px;
        font-size: 0.9rem;
      }

      .result {
        padding: 15px;
      }

      .index-score {
        font-size: 3rem;
      }

      .metrics-grid {
        grid-template-columns: 1fr;
        gap: 10px;
      }
    }

    /* M√≥viles peque√±os (max-width: 480px) */
    @media (max-width: 480px) {
      body {
        padding: 10px;
        font-size: 0.9rem;
      }

      .back-button {
        position: relative;
        width: 100%;
        justify-content: center;
        margin-bottom: 20px;
      }

      header {
        margin-bottom: 30px;
      }

      h1 {
        font-size: 1.5rem;
      }

      .version {
        font-size: 0.8rem;
      }

      .subtitle {
        font-size: 0.8rem;
      }

      .tab {
        padding: 6px 12px;
        font-size: 0.8rem;
      }

      .example-card {
        padding: 15px;
      }

      .example-title {
        font-size: 0.9rem;
      }

      .example-desc {
        font-size: 0.8rem;
      }

      label {
        font-size: 0.85rem;
      }

      input, textarea, select {
        padding: 10px;
        font-size: 0.85rem;
      }

      button {
        padding: 10px;
        font-size: 0.85rem;
      }

      .index-score {
        font-size: 2.5rem;
      }

      .metric-label {
        font-size: 0.8rem;
      }

      .recommendation h3 {
        font-size: 1rem;
      }

      .tensions li, .consequences li {
        font-size: 0.85rem;
        padding: 8px;
      }
    }

    /* Landscape m√≥viles */
    @media (max-height: 600px) and (orientation: landscape) {
      h1 {
        font-size: 1.5rem;
        margin-bottom: 5px;
      }

      header {
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 10px;
      }

      textarea {
        min-height: 60px;
      }
    }

    /* Touch-friendly buttons para m√≥viles */
    @media (pointer: coarse) {
      button, .tab, .example-card {
        min-height: 44px; /* iOS recommended touch target */
      }

      input, textarea, select {
        font-size: 16px; /* Previene zoom en iOS */
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <a href="index.html" class="back-button" aria-label="Back to homepage" data-i18n="nav.back">
        ‚Üê Back to Home
      </a>
      <button id="langToggle" class="lang-toggle" aria-label="Change language" title="English/Espa√±ol">
        <span class="lang-icon">üåê</span>
        <span id="currentLang">EN</span>
      </button>
      <div class="logo-header">
        <img src="LOGO.png" alt="Binah-Œ£ Logo">
        <h1>Binah-Œ£</h1>
      </div>
      <div class="version" data-i18n="header.version">v2.0 - Enterprise Decision Engine</div>
      <p class="subtitle" data-i18n="header.subtitle">Cognitive Infrastructure for Structured Decision Evaluation</p>
    </header>

    <div class="tabs" role="tablist" aria-label="Analysis modes">
      <div class="tab active" data-tab="examples" data-i18n="tabs.examples">Pre-loaded Examples</div>
      <div class="tab" data-tab="custom" data-i18n="tabs.custom">Custom Analysis</div>
      <div class="tab" data-tab="pricing" data-i18n="tabs.pricing">Pricing</div>
    </div>

    <!-- Examples Tab -->
    <div class="tab-content active" id="examples-tab" role="tabpanel" aria-labelledby="examples-tab">
      <h2 class="section-title" data-i18n="examples.title">Click an Example to Analyze</h2>
      <div class="examples-grid">
        <div class="example-card" data-example="twitter">
          <div class="example-title">üíº Elon Musk: Fire 50% of Twitter?</div>
          <div class="example-desc">Evaluate the decision to drastically reduce workforce at a social media platform</div>
        </div>

        <div class="example-card" data-example="pharma">
          <div class="example-title">üíä Pharma: Donate Vaccines?</div>
          <div class="example-desc">Should pharmaceutical companies donate COVID vaccines to developing nations?</div>
        </div>

        <div class="example-card" data-example="startup">
          <div class="example-title">üöÄ Startup: VC or Bootstrap?</div>
          <div class="example-desc">Should a profitable startup raise venture capital or stay bootstrapped?</div>
        </div>

        <div class="example-card" data-example="ai">
          <div class="example-title">ü§ñ OpenAI: Open-Source AGI?</div>
          <div class="example-desc">Should advanced AI systems be made open-source?</div>
        </div>

        <div class="example-card" data-example="climate">
          <div class="example-title">üåç Company: Net-Zero by 2030?</div>
          <div class="example-desc">Manufacturing company considering aggressive carbon neutrality commitment</div>
        </div>

        <div class="example-card" data-example="remote">
          <div class="example-title">üè¢ Return to Office Mandate?</div>
          <div class="example-desc">Fortune 500 company deciding on full-time office return policy</div>
        </div>
      </div>
    </div>

    <!-- Custom Analysis Tab -->
    <div class="tab-content" id="custom-tab" role="tabpanel" aria-labelledby="custom-tab">
      <div class="api-key-section">
        <label for="apiKey">API Key (Optional for Demo)</label>
        <input type="password" id="apiKey" placeholder="Leave blank to use demo endpoint (v1)" />
        <div class="hint">Get your API key from the console when running the server</div>
      </div>

      <div class="provider-select">
        <label for="provider">LLM Provider</label>
        <select id="provider">
          <option value="">Auto (Default)</option>
          <option value="mistral">Mistral AI</option>
          <option value="gemini">Google Gemini</option>
          <option value="deepseek">DeepSeek</option>
        </select>
      </div>

      <div class="form-group">
        <label for="industry">Industry</label>
        <select id="industry">
          <option value="general">General</option>
          <option value="healthcare">Healthcare</option>
          <option value="finance">Finance</option>
          <option value="technology">Technology</option>
          <option value="nonprofit">Nonprofit</option>
        </select>
      </div>

      <div class="form-group">
        <label for="context">Context</label>
        <textarea id="context" required placeholder="Describe the decision context and background..."></textarea>
        <div class="hint">Provide relevant background information</div>
      </div>

      <div class="form-group">
        <label for="question">Decision Question</label>
        <input type="text" id="question" required placeholder="What is the specific decision to be made?" />
        <div class="hint">Frame as a clear, specific question</div>
      </div>

      <div class="form-group">
        <label for="stakeholders">Stakeholders</label>
        <textarea id="stakeholders" required placeholder="employees, customers, investors, community"></textarea>
        <div class="hint">Comma-separated list of affected parties</div>
      </div>

      <div class="form-group">
        <label for="constraints">Constraints</label>
        <textarea id="constraints" required placeholder="budget, timeline, regulations, resources"></textarea>
        <div class="hint">Comma-separated list of limitations</div>
      </div>

      <div class="form-group">
        <label for="time">Time Horizon</label>
        <input type="text" id="time" required placeholder="3 months, 2 years, long-term" />
        <div class="hint">Expected timeframe for impact assessment</div>
      </div>

      <button onclick="runAnalysis()" id="submitBtn" aria-label="Run decision analysis" data-i18n="button.analyze">Run Binah-Œ£ Analysis</button>
    </div>

    <!-- Pricing Tab -->
    <div class="tab-content" id="pricing-tab" role="tabpanel" aria-labelledby="pricing-tab">
      <h2 class="section-title" data-i18n="pricing.title">Binah-Œ£ Pricing</h2>
      <div class="examples-grid">
        <div class="metric-card">
          <div class="example-title">Demo Tier</div>
          <div class="metric-value">FREE</div>
          <ul style="margin-top: 15px; color: #888; font-size: 0.85rem;">
            <li>3 analyses/month</li>
            <li>Basic API access</li>
            <li>Community support</li>
          </ul>
        </div>

        <div class="metric-card" style="border-color: #00ffff;">
          <div class="example-title">Startup</div>
          <div class="metric-value" style="color: #00ffff;">$799/mo</div>
          <ul style="margin-top: 15px; color: #888; font-size: 0.85rem;">
            <li>100 analyses/month</li>
            <li>All LLM providers</li>
            <li>Email support</li>
            <li>API documentation</li>
          </ul>
        </div>

        <div class="metric-card">
          <div class="example-title">Professional</div>
          <div class="metric-value">$4,999/mo</div>
          <ul style="margin-top: 15px; color: #888; font-size: 0.85rem;">
            <li>1,000 analyses/month</li>
            <li>Priority support</li>
            <li>Webhook integrations</li>
            <li>White-label exports</li>
            <li>Team collaboration</li>
          </ul>
        </div>

        <div class="metric-card" style="border-color: #ffaa00;">
          <div class="example-title">Enterprise</div>
          <div class="metric-value" style="color: #ffaa00;">Custom</div>
          <ul style="margin-top: 15px; color: #888; font-size: 0.85rem;">
            <li>Unlimited analyses</li>
            <li>On-premise deployment</li>
            <li>Custom model tuning</li>
            <li>SLA 99.9%</li>
            <li>Dedicated support</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Results Section -->
    <div id="outputSection" style="display: none;" role="region" aria-label="Analysis results">
      <h2 class="section-title" data-i18n="results.title">Analysis Results</h2>

      <div id="metrics" class="metrics-grid"></div>

      <h3 class="section-title">Key Tensions</h3>
      <ul id="tensions" class="array-list"></ul>

      <h3 class="section-title">Unintended Consequences</h3>
      <ul id="consequences" class="array-list"></ul>

      <h3 class="section-title">Recommendation</h3>
      <div id="recommendation" style="background: #0f0f0f; padding: 15px; border-left: 3px solid #00ff88; margin-bottom: 20px;"></div>

      <h3 class="section-title">Full Response</h3>
      <pre id="output"></pre>
    </div>

    <div id="loading" class="loading" style="display: none;" role="status" aria-live="polite" data-i18n="loading.text">
      ‚ö° Binah-Œ£ analyzing decision...
    </div>

    <div id="error" class="error" style="display: none;" role="alert" aria-live="assertive"></div>
  </div>

  <script>
    // Production URLs
    const API_URL_V1 = 'https://binahsigma.onrender.com/binah-sigma/analyze';
    const API_URL_V2 = 'https://binahsigma.onrender.com/v2/analyze';

    // Development URLs (uncomment for local testing)
    // const API_URL_V1 = 'http://localhost:8000/binah-sigma/analyze';
    // const API_URL_V2 = 'http://localhost:8000/v2/analyze';

    const EXAMPLES = {
      twitter: {
        context: "Twitter/X under new ownership is facing $13B in debt and declining ad revenue. Company is burning cash and needs to cut costs dramatically.",
        decision_question: "Should we lay off 50% of the workforce to reduce costs?",
        stakeholders: ["employees", "users", "advertisers", "creditors", "tech ecosystem"],
        constraints: ["$13B debt burden", "declining revenue", "competitive pressure", "brand reputation"],
        time_horizon: "12 months"
      },
      pharma: {
        context: "Major pharmaceutical company developed a COVID vaccine. Developing nations lack access due to high costs. Company faces pressure from activists and governments.",
        decision_question: "Should we donate 30% of our vaccine production to low-income countries at cost?",
        stakeholders: ["shareholders", "patients in developing countries", "governments", "public health officials"],
        constraints: ["$10B R&D investment", "shareholder expectations", "production capacity", "distribution logistics"],
        time_horizon: "2 years"
      },
      startup: {
        context: "SaaS startup reached $5M ARR profitably with 40% growth rate. Multiple VCs offering $20M at $100M valuation. Founders own 100% equity currently.",
        decision_question: "Should we raise Series A venture capital or continue bootstrapping?",
        stakeholders: ["founders", "employees", "customers", "potential investors"],
        constraints: ["maintaining control vs scaling faster", "competitive market", "hiring needs", "runway"],
        time_horizon: "3 years"
      },
      ai: {
        context: "OpenAI has developed AGI-level capabilities. Pressure from open-source community to release weights. Concerns about weaponization and misuse.",
        decision_question: "Should we open-source our AGI model?",
        stakeholders: ["AI researchers", "governments", "humanity", "competitors", "safety researchers"],
        constraints: ["safety concerns", "geopolitical risk", "competitive advantage", "mission alignment"],
        time_horizon: "5-10 years"
      },
      climate: {
        context: "Manufacturing company with $2B revenue, 40% profit margin. ESG investors pushing for net-zero commitment. Would require $500M capex investment.",
        decision_question: "Should we commit to net-zero carbon emissions by 2030?",
        stakeholders: ["shareholders", "employees", "customers", "regulators", "environmental groups"],
        constraints: ["$500M investment needed", "technology maturity", "competitive pressure", "regulatory timeline"],
        time_horizon: "7 years"
      },
      remote: {
        context: "Fortune 500 company with 50,000 employees. Post-COVID productivity is 95% of in-office levels. Real estate leases worth $200M/year. Some competitors going full remote.",
        decision_question: "Should we mandate 5 days/week return to office?",
        stakeholders: ["employees", "management", "real estate", "shareholders", "customers"],
        constraints: ["lease commitments", "talent retention", "productivity metrics", "company culture"],
        time_horizon: "1 year"
      }
    };

    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        // Update all tabs
        document.querySelectorAll('.tab').forEach(t => {
          t.classList.remove('active');
          t.setAttribute('aria-selected', 'false');
        });
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

        // Activate clicked tab
        tab.classList.add('active');
        tab.setAttribute('aria-selected', 'true');
        document.getElementById(tab.dataset.tab + '-tab').classList.add('active');
      });
    });

    // Example cards
    document.querySelectorAll('.example-card').forEach(card => {
      card.addEventListener('click', () => {
        const example = EXAMPLES[card.dataset.example];

        document.getElementById('context').value = example.context;
        document.getElementById('question').value = example.decision_question;
        document.getElementById('stakeholders').value = example.stakeholders.join(', ');
        document.getElementById('constraints').value = example.constraints.join(', ');
        document.getElementById('time').value = example.time_horizon;

        // Switch to custom tab
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelector('[data-tab="custom"]').classList.add('active');
        document.getElementById('custom-tab').classList.add('active');

        // Scroll to form
        document.getElementById('context').scrollIntoView({ behavior: 'smooth' });
      });
    });

    async function runAnalysis() {
      const submitBtn = document.getElementById('submitBtn');
      const loading = document.getElementById('loading');
      const outputSection = document.getElementById('outputSection');
      const errorDiv = document.getElementById('error');

      submitBtn.disabled = true;
      loading.style.display = 'block';
      outputSection.style.display = 'none';
      errorDiv.style.display = 'none';

      const apiKey = document.getElementById('apiKey').value;
      const provider = document.getElementById('provider').value;
      const industry = document.getElementById('industry').value;

      const payload = {
        context: document.getElementById('context').value,
        decision_question: document.getElementById('question').value,
        stakeholders: document.getElementById('stakeholders').value.split(',').map(s => s.trim()).filter(s => s),
        constraints: document.getElementById('constraints').value.split(',').map(s => s.trim()).filter(s => s),
        time_horizon: document.getElementById('time').value,
        provider: provider || null,
        industry: industry || 'general'
      };

      const url = apiKey ? API_URL_V2 : API_URL_V1;
      const headers = {
        'Content-Type': 'application/json'
      };

      if (apiKey) {
        headers['Authorization'] = `Bearer ${apiKey}`;
      }

      try {
        const res = await fetch(url, {
          method: 'POST',
          headers: headers,
          body: JSON.stringify(payload)
        });

        if (!res.ok) {
          const errorData = await res.json();
          throw new Error(errorData.detail?.error || errorData.detail || 'API request failed');
        }

        const data = await res.json();

        displayMetrics(data);
        displayArrays(data);
        document.getElementById('recommendation').textContent = data.binah_recommendation;
        document.getElementById('output').textContent = JSON.stringify(data, null, 2);

        outputSection.style.display = 'block';

      } catch (error) {
        errorDiv.textContent = `Error: ${error.message}`;
        errorDiv.style.display = 'block';
        console.error('Analysis failed:', error);
      } finally {
        loading.style.display = 'none';
        submitBtn.disabled = false;
      }
    }

    function displayMetrics(data) {
      const metricsDiv = document.getElementById('metrics');

      const indexClass = data.binah_sigma_index >= 0.75 ? 'high' : data.binah_sigma_index >= 0.5 ? 'medium' : 'low';

      const metrics = [
        { label: 'Binah-Œ£ Index', value: data.binah_sigma_index.toFixed(2), class: indexClass },
        { label: 'Confidence', value: data.binah_sigma_confidence.toFixed(2), class: 'high' },
        { label: 'Coherence', value: data.decision_coherence, class: 'medium' },
        { label: 'Ethical Alignment', value: data.ethical_alignment, class: 'medium' },
        { label: 'Systemic Risk', value: data.systemic_risk, class: data.systemic_risk === 'Low' ? 'high' : 'low' }
      ];

      if (data.metadata?.provider_used) {
        metrics.push({ label: 'LLM Provider', value: data.metadata.provider_used, class: 'high' });
      }

      metricsDiv.innerHTML = metrics.map(m => `
        <div class="metric-card">
          <div class="metric-label">${m.label}</div>
          <div class="metric-value ${m.class}">${m.value}</div>
        </div>
      `).join('');
    }

    function displayArrays(data) {
      const tensionsUl = document.getElementById('tensions');
      const consequencesUl = document.getElementById('consequences');

      tensionsUl.innerHTML = data.key_tensions.map(t => `<li>${t}</li>`).join('');
      consequencesUl.innerHTML = data.unintended_consequences.map(c => `<li>${c}</li>`).join('');
    }

    // ========================================
    // I18N - INTERNATIONALIZATION SYSTEM
    // ========================================
    const translations = {
      en: {
        'nav.back': '‚Üê Back to Home',
        'header.version': 'v2.0 - Enterprise Decision Engine',
        'header.subtitle': 'Cognitive Infrastructure for Structured Decision Evaluation',
        'tabs.examples': 'Pre-loaded Examples',
        'tabs.custom': 'Custom Analysis',
        'tabs.pricing': 'Pricing',
        'examples.title': 'Click an Example to Analyze',
        'pricing.title': 'Binah-Œ£ Pricing',
        'results.title': 'Analysis Results',
        'loading.text': '‚ö° Binah-Œ£ analyzing decision...',
        'button.analyze': 'Run Binah-Œ£ Analysis'
      },
      es: {
        'nav.back': '‚Üê Volver al Inicio',
        'header.version': 'v2.0 - Motor de Decisiones Empresarial',
        'header.subtitle': 'Infraestructura Cognitiva para Evaluaci√≥n Estructurada de Decisiones',
        'tabs.examples': 'Ejemplos Precargados',
        'tabs.custom': 'An√°lisis Personalizado',
        'tabs.pricing': 'Precios',
        'examples.title': 'Haz Clic en un Ejemplo para Analizar',
        'pricing.title': 'Precios de Binah-Œ£',
        'results.title': 'Resultados del An√°lisis',
        'loading.text': '‚ö° Binah-Œ£ analizando decisi√≥n...',
        'button.analyze': 'Ejecutar An√°lisis Binah-Œ£'
      }
    };

    let currentLang = localStorage.getItem('binahLang') || 'en';

    function setLanguage(lang) {
      currentLang = lang;
      localStorage.setItem('binahLang', lang);
      document.documentElement.lang = lang;
      document.getElementById('currentLang').textContent = lang.toUpperCase();

      // Update all elements with data-i18n attribute
      document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
          element.innerHTML = translations[lang][key];
        }
      });
    }

    // Language toggle button
    document.getElementById('langToggle').addEventListener('click', () => {
      const newLang = currentLang === 'en' ? 'es' : 'en';
      setLanguage(newLang);
    });

    // Initialize language on page load
    setLanguage(currentLang);
  </script>
</body>
</html>
